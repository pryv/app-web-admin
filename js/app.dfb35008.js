(function(t){function e(e){for(var a,i,s=e[0],d=e[1],u=e[2],l=0,p=[];l<s.length;l++)i=s[l],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&p.push(r[i][0]),r[i]=0;for(a in d)Object.prototype.hasOwnProperty.call(d,a)&&(t[a]=d[a]);c&&c(e);while(p.length)p.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],a=!0,s=1;s<n.length;s++){var d=n[s];0!==r[d]&&(a=!1)}a&&(o.splice(e--,1),t=i(i.s=n[0]))}return t}var a={},r={app:0},o=[];function i(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=a,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)i.d(n,a,function(e){return t[e]}.bind(null,a));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/app-web-admin/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],d=s.push.bind(s);s.push=e,s=s.slice();for(var u=0;u<s.length;u++)e(s[u]);var c=d;o.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";var a=n("85ec"),r=n.n(a);r.a},"04ec":function(t,e,n){},"0bdd":function(t,e,n){},1732:function(t,e,n){"use strict";var a=n("04ec"),r=n.n(a);r.a},"1d49":function(t,e,n){},2469:function(t,e,n){"use strict";var a=n("24ee"),r=n.n(a);r.a},"24ee":function(t,e,n){},4287:function(t,e,n){"use strict";var a=n("a68c"),r=n.n(a);r.a},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),r=n("5f5b");n("ab8b"),n("2dd8");a["default"].use(r["a"]);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},i=[],s=(n("034f"),n("2877")),d={},u=Object(s["a"])(d,o,i,!1,null,null,null),c=u.exports,l=n("8c4f"),p=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"home"},[a("img",{attrs:{alt:"Logo",src:n("cf05")}}),a("Config")],1)},f=[],v=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"config"},[n("h1",[t._v("Configuration Panel")]),n("form",{on:{submit:function(e){return e.preventDefault(),t.getConfig(e)}}},[n("label",{attrs:{for:"address"}},[t._v("Config leader address")]),n("br"),n("input",{directives:[{name:"model",rawName:"v-model",value:t.address,expression:"address"}],attrs:{required:"",pattern:"https?://\\S+",type:"text",name:"address",id:"address"},domProps:{value:t.address},on:{input:[function(e){e.target.composing||(t.address=e.target.value)},t.resetFailureIndicators]}}),n("br"),n("br"),n("label",{attrs:{for:"adminKey"}},[t._v("Admin key")]),n("br"),n("input",{directives:[{name:"model",rawName:"v-model",value:t.adminKey,expression:"adminKey"}],attrs:{required:"",type:"text",name:"adminKey",id:"adminKey"},domProps:{value:t.adminKey},on:{input:[function(e){e.target.composing||(t.adminKey=e.target.value)},t.resetFailureIndicators]}}),n("br"),n("br"),n("b-button",{attrs:{variant:"success",type:"submit"}},[t._v("Load")])],1),t.loadFailed?n("div",{staticClass:"failure-msg"},[n("p",[t._v("Unable to retrieve configuration from server.")]),n("p",[t._v("Verify provided information or try again later.")])]):t._e(),0!==Object.keys(t.pryvConfig).length?n("b-button",{attrs:{variant:"success"},on:{click:t.updateConfig}},[t._v("Update ")]):t._e(),t.updateInProgress?n("loader",{attrs:{loading:t.updateInProgress}}):t._e(),t.updateFailed?n("div",{staticClass:"failure-msg"},[n("p",[t._v("Unable to update configuration.")]),n("p",[t._v("Verify provided information or try again later.")])]):t._e(),n("br"),n("ConfigTable",{attrs:{config:t.pryvConfig},on:{tableAltered:function(e){t.pryvConfig=e}}}),n("transition",{attrs:{name:"modal"}},[t.showModal?n("UpdateReportModal",{attrs:{updateReport:t.updateConfigReport},on:{updateReportModalClosed:function(e){t.showModal=!1}}}):t._e()],1)],1)},m=[],h=(n("99af"),n("d3b7"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"config-table"},[0!==Object.keys(t.config).length?n("table",[t._m(0),t._l(t.config,(function(e,a){return n("tr",{key:a},[n("td",[t._v(t._s(a))]),n("td",[n("div",{attrs:{contenteditable:""},on:{input:function(e){return t.onValueInput(e,a)}}},[t._v(" "+t._s(e)+" ")])])])}))],2):t._e()])}),b=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("tr",[n("th",[t._v("Property")]),n("th",[t._v("Value")])])}],g={name:"ConfigTable",props:{config:{}},methods:{onValueInput:function(t,e){this.config[e]=JSON.stringify(JSON.parse(t.target.innerText),null,2),this.$emit("tableAltered",this.config)}}},_=g,y=(n("1732"),Object(s["a"])(_,h,b,!1,null,"c9a13ea0",null)),C=y.exports,O=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Modal",{on:{close:function(e){return t.$emit("updateReportModalClosed")}}},[n("h3",{attrs:{slot:"header"},slot:"header"},[t._v("Configuration update report")]),n("table",{attrs:{slot:"body"},slot:"body"},[n("hr"),t.updateReport.successes?n("div",[n("tr",[n("th",{staticClass:"main-header",attrs:{colspan:"2"}},[t._v("Successes")])]),n("tr",[n("th",[t._v("url")]),n("th",[t._v("role")])]),t._l(t.updateReport.successes,(function(e,a){return n("tr",{key:a},[n("td",[t._v(t._s(e.url))]),n("td",[t._v(t._s(e.role))])])}))],2):t._e(),n("br"),t.updateReport.failures?n("div",[n("tr",[n("th",{staticClass:"main-header",attrs:{colspan:"2"}},[t._v("Failures")])]),n("tr",[n("th",[t._v("url")]),n("th",[t._v("role")])]),t._l(t.updateReport.failures,(function(e,a){return n("tr",{key:a},[n("td",[t._v(t._s(e.url))]),n("td",[t._v(t._s(e.role))])])}))],2):t._e()])])},w=[],x=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"modal-mask"},[n("div",{staticClass:"modal-wrapper"},[n("div",{staticClass:"modal-container"},[n("div",{staticClass:"modal-header"},[t._t("header",[t._v(t._s(t.header))])],2),n("div",{staticClass:"modal-body"},[t._t("body",[t._v(t._s(t.body))])],2),n("div",{staticClass:"modal-footer"},[n("b-button",{on:{click:function(e){return t.$emit("close")}}},[t._v("OK")]),n("br")],1)])])])},j=[],P={name:"Modal",props:{header:String,body:String}},M=P,F=(n("4287"),Object(s["a"])(M,x,j,!1,null,"f4c87580",null)),R=F.exports,k={name:"UpdateReportModal",components:{Modal:R},props:{updateReport:{}}},K=k,$=(n("bcdd"),Object(s["a"])(K,O,w,!1,null,"8b9b6806",null)),S=$.exports,E=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"loader-mask"},[n("div",{staticClass:"loader-wrapper"},[n("pulse-loader")],1)])},I=[],T=n("8a5d"),N={name:"Loader",components:{PulseLoader:T["a"]}},U=N,L=(n("7903"),Object(s["a"])(U,E,I,!1,null,"6c4ecc3b",null)),V=L.exports,J=n("bc3a"),A={name:"Config",components:{ConfigTable:C,UpdateReportModal:S,Loader:V},data:function(){return{pryvConfig:{},address:"",adminKey:"",loadFailed:!1,updateFailed:!1,showModal:!1,updateConfigReport:{},updateInProgress:!1}},methods:{isFormNotEmpty:function(){return!!this.address&&!!this.adminKey},getConfig:function(){var t=this;this.isFormNotEmpty()&&(this.pryvConfig={},J.get("".concat(this.address,"/admin/settings?auth=").concat(this.adminKey)).then((function(e){t.pryvConfig=e.data})).catch((function(){t.loadFailed=!0})))},updateConfig:function(){var t=this;this.updateInProgress=!0,this.updateFailed=!1,J.put("".concat(this.address,"/admin/settings?auth=").concat(this.adminKey),this.pryvConfig).then((function(){return J.post("".concat(t.address,"/admin/notify?auth=").concat(t.adminKey))})).then((function(e){t.updateConfigReport=e.data,t.showModal=!0})).catch((function(){t.updateFailed=!0})).finally((function(){t.updateInProgress=!1}))},resetFailureIndicators:function(){this.loadFailed=!1,this.updateFailed=!1}}},q=A,H=(n("89d5"),Object(s["a"])(q,v,m,!1,null,"9c005608",null)),D=H.exports,z={name:"Home",components:{Config:D}},B=z,G=(n("2469"),Object(s["a"])(B,p,f,!1,null,"e6e67724",null)),Q=G.exports;a["default"].use(l["a"]);var W=[{path:"/",name:"Home",component:Q}],X=new l["a"]({routes:W}),Y=X;a["default"].config.productionTip=!1,new a["default"]({router:Y,render:function(t){return t(c)}}).$mount("#app")},7903:function(t,e,n){"use strict";var a=n("0bdd"),r=n.n(a);r.a},"85ec":function(t,e,n){},"89d5":function(t,e,n){"use strict";var a=n("1d49"),r=n.n(a);r.a},a68c:function(t,e,n){},ad4c:function(t,e,n){},bcdd:function(t,e,n){"use strict";var a=n("ad4c"),r=n.n(a);r.a},cf05:function(t,e,n){t.exports=n.p+"img/logo.54cacaa3.png"}});
//# sourceMappingURL=app.dfb35008.js.map